<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ê°€ìœ„ë°”ìœ„ë³´ ë¯¸ë‹ˆê²Œì„</title>
<style>
  :root{
    --bg:#f6f8fb;
    --card:#ffffff;
    --accent:#3DADFF;
    --ok:#2ecc71;
    --bad:#e74c3c;
    --muted:#777;
    font-family: "Segoe UI", Roboto, "Noto Sans KR", system-ui, -apple-system, "Helvetica Neue", Arial;
  }
  html,body{height:100%;margin:0;background:var(--bg);color:#111}
  .wrap{
    max-width:900px;margin:28px auto;padding:18px;
  }
  header{display:flex;align-items:center;gap:12px;margin-bottom:18px}
  header h1{font-size:20px;margin:0}
  .board{
    display:grid;grid-template-columns: 1fr 320px;gap:16px;
  }
  .card{
    background:var(--card);border-radius:12px;padding:14px;box-shadow:0 6px 20px rgba(20,30,50,0.06);
  }

  /* ì™¼ìª½ : ê²Œì„ì˜ì—­ */
  .game-area{display:flex;flex-direction:column;gap:12px}
  .status {
    display:flex;justify-content:space-between;align-items:center;gap:8px;
  }
  .status .result{
    font-weight:700;font-size:18px;
  }
  .status .sub { color:var(--muted); font-size:13px }
  .choices{
    display:flex;gap:12px;justify-content:center;padding:6px;
  }
  .choice-btn{
    width:110px;height:110px;border-radius:12px;border:2px solid transparent;
    background:linear-gradient(180deg,#fff,#f7fbff);
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    cursor:pointer;user-select:none;transition:transform .08s ease, box-shadow .12s, border-color .12s;
    font-weight:700;font-size:14px;
    box-shadow:0 4px 14px rgba(30,60,120,0.06);
  }
  .choice-btn:active{transform:translateY(2px) scale(.99)}
  .choice-btn.disabled{opacity:.5;pointer-events:none}
  .choice-label{font-size:28px;margin-bottom:6px}
  .choice-info{font-size:13px;color:var(--muted)}

  .choice-btn.selected{border-color:var(--accent); box-shadow:0 8px 20px rgba(61,173,255,0.18)}
  .choice-btn.win{border-color:var(--ok); box-shadow:0 10px 26px rgba(46, 204, 113, 0.12)}
  .choice-btn.lose{border-color:var(--bad); box-shadow:0 10px 26px rgba(231, 76, 60, 0.12)}

  .vs-area{
    display:flex;align-items:center;justify-content:center;gap:18px;padding:8px;margin-top:6px;
  }
  .player, .computer{
    width:140px;height:140px;border-radius:12px;background:#fbfdff;border:1px solid #eef4ff;
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    font-weight:700;
  }
  .player .lbl, .computer .lbl{font-size:12px;color:var(--muted)}
  .player .pick, .computer .pick{font-size:40px;margin-top:6px}

  .controls{display:flex;gap:8px;align-items:center;justify-content:flex-end}
  .controls button{padding:8px 12px;border-radius:8px;border:none;background:var(--accent);color:#fff;cursor:pointer}
  .controls button.ghost{background:#f0f6ff;color:#036; border:1px solid #e6f1ff}

  /* ì˜¤ë¥¸ìª½ : ì ìˆ˜íŒ / íˆìŠ¤í† ë¦¬ */
  .side{
    display:flex;flex-direction:column;gap:12px;
  }
  .score{
    display:flex;gap:12px;align-items:center;justify-content:space-between;
  }
  .score .numbers{display:flex;gap:12px}
  .num{background:#fff;padding:10px;border-radius:8px;min-width:80px;text-align:center}
  .num .v{font-weight:800;font-size:20px}
  .history{max-height:360px;overflow:auto;padding:8px;border-radius:8px;background:#fbfdff;border:1px solid #eef5ff}
  .history-item{display:flex;justify-content:space-between;padding:8px;border-bottom:1px dashed #eee;font-size:14px}
  .history-item .who{color:var(--muted);font-size:13px}

  footer{margin-top:16px;color:var(--muted);font-size:13px;text-align:center}

  /* responsive */
  @media(max-width:860px){
    .board{grid-template-columns:1fr; }
    .side{order:2}
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>ê°€ìœ„ë°”ìœ„ë³´ ë¯¸ë‹ˆê²Œì„ âš”ï¸</h1>
      <div style="color:var(--muted);font-size:13px">R:ê°€ìœ„, P:ë°”ìœ„, S:ë³´ (í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤)</div>
    </header>

    <div class="board">
      <!-- ê²Œì„ ì˜ì—­ -->
      <section class="card game-area" aria-labelledby="game-title">
        <h2 id="game-title" style="margin:0 0 6px 0;font-size:16px">ëŒ€ì „</h2>

        <div class="status">
          <div>
            <div class="result" id="resultText">ì‹œì‘í•˜ë ¤ë©´ ì„ íƒí•˜ì„¸ìš”</div>
            <div class="sub" id="subText">ì»´í“¨í„°ì™€ ëŒ€ê²°í•©ë‹ˆë‹¤</div>
          </div>
          <div class="controls">
            <button id="resetBtn" class="ghost">ì´ˆê¸°í™”</button>
            <button id="autoPlayBtn">ìë™ ëŒ€ì „(5íšŒ)</button>
          </div>
        </div>

        <div class="choices" role="group" aria-label="ì„ íƒ">
          <button class="choice-btn" data-move="scissors" id="btn-scissors" aria-pressed="false">
            <div class="choice-label">âœŒï¸</div>
            <div class="choice-info">ê°€ìœ„</div>
          </button>

          <button class="choice-btn" data-move="rock" id="btn-rock" aria-pressed="false">
            <div class="choice-label">âœŠ</div>
            <div class="choice-info">ë°”ìœ„</div>
          </button>

          <button class="choice-btn" data-move="paper" id="btn-paper" aria-pressed="false">
            <div class="choice-label">ğŸ–</div>
            <div class="choice-info">ë³´</div>
          </button>
        </div>

        <div class="vs-area" aria-live="polite">
          <div class="player" aria-label="í”Œë ˆì´ì–´">
            <div class="lbl">í”Œë ˆì´ì–´</div>
            <div class="pick" id="playerPick">â€”</div>
          </div>

          <div style="font-weight:700;color:#666">VS</div>

          <div class="computer" aria-label="ì»´í“¨í„°">
            <div class="lbl">ì»´í“¨í„°</div>
            <div class="pick" id="computerPick">â€”</div>
          </div>
        </div>
      </section>

      <!-- ì‚¬ì´ë“œ: ì ìˆ˜ / íˆìŠ¤í† ë¦¬ -->
      <aside class="side">
        <div class="card score" aria-labelledby="score-title">
          <div>
            <div id="score-title" style="font-weight:700;margin-bottom:8px">ì ìˆ˜íŒ</div>
            <div class="numbers">
              <div class="num"><div style="font-size:12px;color:var(--muted)">ìŠ¹</div><div class="v" id="winCount">0</div></div>
              <div class="num"><div style="font-size:12px;color:var(--muted)">ë¬´</div><div class="v" id="drawCount">0</div></div>
              <div class="num"><div style="font-size:12px;color:var(--muted)">íŒ¨</div><div class="v" id="loseCount">0</div></div>
            </div>
          </div>
          <div style="text-align:right">
            <div style="font-size:12px;color:var(--muted)">ì—°ì†ìŠ¹ë¦¬</div>
            <div style="font-weight:800;font-size:18px" id="streak">0</div>
          </div>
        </div>

        <div class="card">
          <div style="font-weight:700;margin-bottom:8px">íˆìŠ¤í† ë¦¬ (ìµœê·¼ 10)</div>
          <div class="history" id="historyList" aria-live="polite"></div>
        </div>

        <div class="card" style="text-align:center">
          <button id="shareBtn" class="ghost">ê²°ê³¼ ê³µìœ (ë³µì‚¬)</button>
        </div>
      </aside>
    </div>

    <footer>
      ì¦ê²ê²Œ í”Œë ˆì´í•˜ì„¸ìš” â€” í•„ìš”í•˜ë©´ ê¸°ëŠ¥ ì¶”ê°€í•´ì¤„ê²Œ!
    </footer>
  </div>

<script>
/*
  ê°„ë‹¨í•œ ë¡œì§ ì„¤ëª…:
  - ì‚¬ìš©ì ë²„íŠ¼ í´ë¦­ ë˜ëŠ” í‚¤ë³´ë“œ ì…ë ¥ìœ¼ë¡œ move ê²°ì •
  - ì»´í“¨í„°ëŠ” ëœë¤ìœ¼ë¡œ move ì„ íƒ
  - ìŠ¹íŒ¨ ê³„ì‚° í›„ UI ì—…ë°ì´íŠ¸ (ì ìˆ˜, ìŠ¤íƒœë¦­, íˆìŠ¤í† ë¦¬)
  - ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— score ì €ì¥ (win/draw/lose, streak)
*/

// util
const MOVES = ["scissors","rock","paper"];
const EMOJI = { scissors:"âœŒï¸", rock:"âœŠ", paper:"ğŸ–" };
const KOREA = { scissors:"ê°€ìœ„", rock:"ë°”ìœ„", paper:"ë³´" };

function pickRandom() {
  return MOVES[Math.floor(Math.random()*MOVES.length)];
}
function decide(player, cpu) {
  if (player === cpu) return "draw";
  // ê°€ìœ„ beats ë³´, ë°”ìœ„ beats ê°€ìœ„, ë³´ beats ë°”ìœ„
  if ((player==="scissors" && cpu==="paper") ||
      (player==="rock" && cpu==="scissors") ||
      (player==="paper" && cpu==="rock")) {
    return "win";
  }
  return "lose";
}

// DOM
const btns = {
  scissors: document.getElementById("btn-scissors"),
  rock: document.getElementById("btn-rock"),
  paper: document.getElementById("btn-paper"),
};
const playerPickEl = document.getElementById("playerPick");
const computerPickEl = document.getElementById("computerPick");
const resultText = document.getElementById("resultText");
const subText = document.getElementById("subText");

const winEl = document.getElementById("winCount");
const drawEl = document.getElementById("drawCount");
const loseEl = document.getElementById("loseCount");
const streakEl = document.getElementById("streak");
const historyEl = document.getElementById("historyList");

const resetBtn = document.getElementById("resetBtn");
const autoPlayBtn = document.getElementById("autoPlayBtn");
const shareBtn = document.getElementById("shareBtn");

// state (ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì—°ë™)
const STORAGE_KEY = "rps_score_v1";
let state = {
  win:0, draw:0, lose:0, streak:0, history:[]
};
function loadState(){
  try{
    const s = JSON.parse(localStorage.getItem(STORAGE_KEY));
    if (s && typeof s === "object"){
      state = Object.assign(state, s);
      if (!Array.isArray(state.history)) state.history = [];
    }
  }catch(e){}
}
function saveState(){
  try{ localStorage.setItem(STORAGE_KEY, JSON.stringify({
    win: state.win, draw: state.draw, lose: state.lose, streak: state.streak, history: state.history.slice(0,50)
  })); }catch(e){}
}

// UI ì—…ë°ì´íŠ¸
function renderScore(){
  winEl.textContent = state.win;
  drawEl.textContent = state.draw;
  loseEl.textContent = state.lose;
  streakEl.textContent = state.streak;
}
function renderHistory(){
  historyEl.innerHTML = "";
  const list = state.history.slice(0,10);
  if (list.length===0){ historyEl.innerHTML = '<div style="color:var(--muted);padding:12px;text-align:center">ì•„ì§ í”Œë ˆì´ê°€ ì—†ìŠµë‹ˆë‹¤</div>'; return;}
  list.forEach(item=>{
    const div = document.createElement("div");
    div.className = "history-item";
    div.innerHTML = `<div><strong>${EMOJI[item.player]}</strong> ${KOREA[item.player]} â†’ <strong>${EMOJI[item.cpu]}</strong> ${KOREA[item.cpu]}</div>
                     <div class="who">${item.result === "win" ? "ìŠ¹" : item.result === "lose" ? "íŒ¨" : "ë¬´"}</div>`;
    historyEl.appendChild(div);
  });
}

// highlight ìƒíƒœ ì´ˆê¸°í™”
function clearChoiceHighlights(){
  Object.values(btns).forEach(b => {
    b.classList.remove("selected","win","lose");
    b.setAttribute("aria-pressed","false");
  });
}

// í”Œë ˆì´ í•œ íŒ ì‹¤í–‰ (ë²„íŠ¼ ë˜ëŠ” í‚¤ë³´ë“œ)
let disabled = false;
async function playRound(playerMove){
  if (disabled) return;
  disabled = true;
  clearChoiceHighlights();

  // ì‚¬ìš©ì ì„ íƒ í•˜ì´ë¼ì´íŠ¸
  const userBtn = btns[playerMove];
  userBtn.classList.add("selected");
  userBtn.setAttribute("aria-pressed","true");
  playerPickEl.textContent = EMOJI[playerMove];

  // ì ê¹ ë”œë ˆì´(ì• ë‹ˆë©”ì´ì…˜ ëŠë‚Œ)
  resultText.textContent = "ì»´í“¨í„° ì„ íƒ ì¤‘...";
  subText.textContent = "ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”";
  // animate CPU thinking
  computerPickEl.textContent = "ğŸ¤–";
  await new Promise(r => setTimeout(r, 600 + Math.random()*300));

  const cpuMove = pickRandom();
  computerPickEl.textContent = EMOJI[cpuMove];

  // ê²°ê³¼ ê²°ì •
  const res = decide(playerMove, cpuMove);

  // ì‹œê°ì  ê°•ì¡°
  if (res === "win") {
    userBtn.classList.add("win");
    resultText.textContent = "ìŠ¹ë¦¬!";
    subText.textContent = `${KOREA[playerMove]}ì´(ê°€) ${KOREA[cpuMove]}ì„(ë¥¼) ì´ê²¼ìŠµë‹ˆë‹¤. ğŸ‰`;
    state.win++;
    state.streak = (state.streak || 0) + 1;
  } else if (res === "lose"){
    userBtn.classList.add("lose");
    resultText.textContent = "íŒ¨ë°°";
    subText.textContent = `${KOREA[cpuMove]}ì´(ê°€) ${KOREA[playerMove]}ì„(ë¥¼) ì´ê²¼ìŠµë‹ˆë‹¤. ğŸ’¥`;
    state.lose++;
    state.streak = 0;
  } else {
    resultText.textContent = "ë¬´ìŠ¹ë¶€";
    subText.textContent = "ë¹„ê²¼ìŠµë‹ˆë‹¤.";
    state.draw++;
    // ë¬´ìŠ¹ë¶€ëŠ” streakì— ì˜í–¥ ì—†ìŒ
  }

  // íˆìŠ¤í† ë¦¬ ê°±ì‹  (ì•ìª½ ì‚½ì…)
  state.history.unshift({ player:playerMove, cpu:cpuMove, result:res, at: Date.now() });
  if (state.history.length > 50) state.history.length = 50;

  renderScore();
  renderHistory();
  saveState();

  // ì ê¹ í›„ ì…ë ¥ í—ˆìš©
  setTimeout(()=>{ disabled=false; }, 300);
}

// ì´ˆê¸°í™”
function resetAll(){
  if (!confirm("ì ìˆ˜ì™€ íˆìŠ¤í† ë¦¬ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
  state = { win:0, draw:0, lose:0, streak:0, history:[] };
  saveState();
  renderScore();
  renderHistory();
  clearChoiceHighlights();
  playerPickEl.textContent = "â€”";
  computerPickEl.textContent = "â€”";
  resultText.textContent = "ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì„ íƒí•˜ì„¸ìš”.";
  subText.textContent = "R:ê°€ìœ„ P:ë°”ìœ„ S:ë³´";
}

// ìë™ í”Œë ˆì´ ì˜ˆì‹œ(ê°„ë‹¨)
async function autoPlay(times = 5, interval=600){
  autoPlayBtn.disabled = true;
  for (let i=0;i<times;i++){
    const pick = pickRandom();
    await playRound(pick);
    await new Promise(r => setTimeout(r, interval));
  }
  autoPlayBtn.disabled = false;
}

// ê³µìœ  (ê²°ê³¼ í…ìŠ¤íŠ¸ ë³µì‚¬)
function shareResult(){
  const total = state.win + state.draw + state.lose;
  const txt = `ê°€ìœ„ë°”ìœ„ë³´ ê²°ê³¼ â€” ì´ ${total}íŒ: ìŠ¹ ${state.win} / ë¬´ ${state.draw} / íŒ¨ ${state.lose} (ìµœëŒ€ ì—°ìŠ¹ ${state.streak})`;
  navigator.clipboard?.writeText ? navigator.clipboard.writeText(txt).then(()=>{
    alert("ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
  }).catch(()=>{ alert("ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."); }) : alert(txt);
}

// ë°”ì¸ë”©
Object.entries(btns).forEach(([move, btn])=>{
  btn.addEventListener("click", ()=> playRound(move));
});

// í‚¤ë³´ë“œ: R(ê°€ìœ„) P(ë°”ìœ„) S(ë³´). í•œê¸€ ì…ë ¥ ì‹œ í˜¼ë™ ì—†ê²Œ ì˜ì–´ ë¬¸ì ê¸°ì¤€.
document.addEventListener("keydown", (e)=>{
  if (e.key.toLowerCase() === 'r') playRound("scissors");
  if (e.key.toLowerCase() === 'p') playRound("rock");
  if (e.key.toLowerCase() === 's') playRound("paper");
});

// ê¸°íƒ€ ë²„íŠ¼
resetBtn.addEventListener("click", resetAll);
autoPlayBtn.addEventListener("click", ()=> autoPlay(5, 600));
shareBtn.addEventListener("click", shareResult);

// ë¡œë“œ ì‹œ ì´ˆê¸° ë Œë”
loadState();
renderScore();
renderHistory();
</script>
</body>
</html>
